<% layout("../layout/boilerplate") %> <!--*All The Contents Of this File Will be Passed To This Layout File-->
<%- include("../partials/sidebar") %>

<script src="https://uicdn.toast.com/editor/latest/toastui-editor-all.min.js"></script>

    <div class="container w-[65%] mx-auto my-10 pl-10 min-h-max">
        <h1 class="text-2xl text-slate-500 font-light  my-6 font-sofia">Edit a Question</h1>

        <div>
            <form action="/question/<%=question._id%>/edit?_method=PUT" method="post" autocomplete="off" id="questionEditForm">

                <span class="drop-shadow-sm rounded-xl bg-[#DAE8E7] text-[#378583] p-3 font-sofia">Editing As <%= question.user.username %> </span>

                <br><br>
                <label for="questionTitle" class="text-slate-400 font-sofia">Question Title</label>
                <br>
                <input type="text" name="questionTitle" id="questionTitle" class=" mt-2 rounded-xl border border-slate-200 shadow-sm placeholder-slate-400 focus:outline-none focus:border-sky-500 focus:ring-1 focus:ring-sky-500 w-full text-slate-600" required value="<%= question.questionTitle %>">

                <br><br>

                <label for="questionDescription" class="text-slate-400 font-sofia">Description</label>
                <br>

                <div id="editor" class="my-2">
                    <%-  question.questionDescription %>
                </div>

                <input type="hidden" name="questionDescription" id = "questionDescriptionInput">
                <br><br>
                <label for="tags" class="text-slate-400 font-sofia">Tags</label>
                <input type="text" class="mt-2 rounded-xl border border-slate-200 shadow-sm placeholder-slate-400 focus:outline-none focus:border-sky-500 focus:ring-1 focus:ring-sky-500 w-full text-slate-600" name="tags" id="tags" placeholder="Edit Tags" value="<%= tagsArray %>">


                <br><br>
                <button type="submit" class="p-3 mr-5 ring-2 ring-green-500 hover:bg-green-400 hover:text-white bg-green-200 text-green-600 rounded-xl drop-shadow-lg">Edit Question</button>
                <button type="reset" class="p-3 ring-2 hover:bg-blue-400 hover:text-white ring-blue-500 text-blue-600 bg-blue-200 rounded-xl drop-shadow-lg">Reset</button>
            </form>
        </div>
    </div>

<script>
    const editor = new toastui.Editor({
        el:document.querySelector("#editor"),
        previewStyle:'vertical',
        initialEditType:"wysiwyg",
        height:'300px'
    })

    $("#questionEditForm").submit(function() {
        let data = editor.getHTML();
        $("#questionDescriptionInput").val(data);
    })

</script>